# UNM-Server V2 ğŸµ

> ç°ä»£åŒ–éŸ³ä¹APIæœåŠ¡ - å…¨é¢é‡æ„ç‰ˆæœ¬

åŸºäºæœ€æ–°æŠ€æœ¯æ ˆé‡æ„çš„é«˜æ€§èƒ½éŸ³ä¹APIæœåŠ¡ï¼Œé‡‡ç”¨Monorepoæ¶æ„ï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸš€ **æè‡´æ€§èƒ½**: åŸºäºBunè¿è¡Œæ—¶å’ŒHonoæ¡†æ¶
- ğŸ—ï¸ **ç°ä»£æ¶æ„**: TypeScript + ESM + Monorepo
- ğŸ¯ **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰å’ŒZodéªŒè¯
- ğŸ”„ **æ™ºèƒ½ç¼“å­˜**: Redisç¼“å­˜ + åˆ†å±‚TTLç­–ç•¥
- ğŸŒ **å…¨æ ˆè§£å†³æ–¹æ¡ˆ**: Nuxt 3å‰ç«¯ + APIåç«¯
- ğŸ“± **å“åº”å¼è®¾è®¡**: ç°ä»£åŒ–UIç»„ä»¶å’ŒPWAæ”¯æŒ
- ğŸ”§ **å¼€å‘å‹å¥½**: çƒ­é‡è½½ã€ä»£ç æ£€æŸ¥ã€è‡ªåŠ¨æ ¼å¼åŒ–
- ğŸ³ **å®¹å™¨åŒ–**: Dockerå¤šé˜¶æ®µæ„å»ºä¼˜åŒ–
- ğŸš€ **è¾¹ç¼˜éƒ¨ç½²**: Vercel Edge Functions + Cloudflare Workers

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
unm-server-v2/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/                 # Bun + Hono APIæœåŠ¡
â”‚   â””â”€â”€ web/                 # Nuxt 3å‰ç«¯åº”ç”¨
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/              # å…±äº«ç±»å‹å’Œå·¥å…·
â”‚   â”œâ”€â”€ database/            # Prismaæ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ config/              # å…±äº«é…ç½®
â”œâ”€â”€ docker/                  # Dockeré…ç½®
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â””â”€â”€ scripts/                 # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
```

## ğŸš€ æŠ€æœ¯æ ˆ

### åç«¯

- **è¿è¡Œæ—¶**: Bun (æè‡´æ€§èƒ½)
- **æ¡†æ¶**: Hono (è½»é‡çº§ã€é«˜æ€§èƒ½)
- **è¯­è¨€**: TypeScript (ä¸¥æ ¼æ¨¡å¼)
- **æ•°æ®åº“**: PostgreSQL + Prisma ORM
- **ç¼“å­˜**: Redis + Upstash
- **éªŒè¯**: Zod (è¿è¡Œæ—¶ç±»å‹éªŒè¯)

### å‰ç«¯

- **æ¡†æ¶**: Nuxt 3 (Vue 3 + SSR/SSG)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: TailwindCSS + Nuxt UI
- **çŠ¶æ€ç®¡ç†**: Pinia
- **æ„å»ºå·¥å…·**: Vite

### å¼€å‘å·¥å…·

- **åŒ…ç®¡ç†**: pnpm (Monorepo)
- **ä»£ç è´¨é‡**: ESLint + Prettier + TypeScript
- **æµ‹è¯•**: Vitest + Playwright
- **CI/CD**: GitHub Actions
- **å®¹å™¨åŒ–**: Docker

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè¦æ±‚

- Node.js >= 20.0.0
- pnpm >= 9.0.0
- Bun >= 1.0.0 (å¯é€‰ï¼Œç”¨äºAPIæœåŠ¡)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm install
```

### 2. ç¯å¢ƒé…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
vim .env
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆå¹¶è¡Œï¼‰
pnpm dev

# æˆ–åˆ†åˆ«å¯åŠ¨
pnpm --filter @unm/api dev    # APIæœåŠ¡
pnpm --filter @unm/web dev    # å‰ç«¯åº”ç”¨
```

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
pnpm start
```

## ğŸ“¦ åŒ…è¯´æ˜

### @unm/shared

å…±äº«ç±»å‹å®šä¹‰å’Œå·¥å…·å‡½æ•°ï¼ŒåŒ…å«ï¼š

- APIå“åº”ç±»å‹
- éŸ³ä¹ç›¸å…³ç±»å‹å®šä¹‰
- é€šç”¨å·¥å…·å‡½æ•°
- ZodéªŒè¯Schema

### @unm/config

é…ç½®ç®¡ç†åŒ…ï¼Œæä¾›ï¼š

- ç¯å¢ƒå˜é‡éªŒè¯
- é…ç½®åŠ è½½å’ŒéªŒè¯
- ç±»å‹å®‰å…¨çš„é…ç½®è®¿é—®

### @unm/database

æ•°æ®åº“ç›¸å…³é…ç½®ï¼š

- Prisma Schemaå®šä¹‰
- æ•°æ®åº“è¿ç§»
- ç±»å‹ç”Ÿæˆ

## ğŸ”§ å¼€å‘å‘½ä»¤

```bash
# å¼€å‘
pnpm dev                    # å¯åŠ¨æ‰€æœ‰æœåŠ¡
pnpm dev:api               # ä»…å¯åŠ¨APIæœåŠ¡
pnpm dev:web               # ä»…å¯åŠ¨å‰ç«¯

# æ„å»º
pnpm build                 # æ„å»ºæ‰€æœ‰åŒ…
pnpm build:api             # æ„å»ºAPIæœåŠ¡
pnpm build:web             # æ„å»ºå‰ç«¯

# æµ‹è¯•
pnpm test                  # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test:unit             # å•å…ƒæµ‹è¯•
pnpm test:e2e              # ç«¯åˆ°ç«¯æµ‹è¯•

# ä»£ç è´¨é‡
pnpm lint                  # ä»£ç æ£€æŸ¥
pnpm lint:fix              # è‡ªåŠ¨ä¿®å¤
pnpm format                # ä»£ç æ ¼å¼åŒ–
pnpm typecheck             # ç±»å‹æ£€æŸ¥

# æ•°æ®åº“
pnpm db:generate           # ç”ŸæˆPrismaå®¢æˆ·ç«¯
pnpm db:push               # æ¨é€Schemaåˆ°æ•°æ®åº“
pnpm db:migrate            # è¿è¡Œè¿ç§»
pnpm db:studio             # æ‰“å¼€Prisma Studio

# Docker
pnpm docker:build          # æ„å»ºDockeré•œåƒ
pnpm docker:run            # è¿è¡ŒDockerå®¹å™¨
```

## ğŸŒ APIæ–‡æ¡£

APIæ–‡æ¡£å°†åœ¨å¼€å‘æœåŠ¡å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆï¼Œè®¿é—®ï¼š

- å¼€å‘ç¯å¢ƒ: http://localhost:5678/docs
- ç”Ÿäº§ç¯å¢ƒ: https://your-domain.com/docs

## ğŸ“ ç¯å¢ƒå˜é‡

è¯¦ç»†çš„ç¯å¢ƒå˜é‡é…ç½®è¯·å‚è€ƒ `.env.example` æ–‡ä»¶ã€‚

ä¸»è¦é…ç½®é¡¹ï¼š

- `NODE_ENV`: è¿è¡Œç¯å¢ƒ
- `PORT`: APIæœåŠ¡ç«¯å£
- `DATABASE_URL`: æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
- `REDIS_URL`: Redisè¿æ¥å­—ç¬¦ä¸²
- `ALLOWED_DOMAIN`: CORSå…è®¸çš„åŸŸå

## ğŸš€ éƒ¨ç½²

### Verceléƒ¨ç½²

```bash
# å®‰è£…Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel --prod
```

### Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t unm-server-v2 .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 -p 5678:5678 unm-server-v2
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- åŸé¡¹ç›®è´¡çŒ®è€…
- å¼€æºç¤¾åŒºçš„æ”¯æŒ
- æ‰€æœ‰ä½¿ç”¨å’Œåé¦ˆçš„ç”¨æˆ·

---

**æ³¨æ„**: è¿™æ˜¯UNM-Serverçš„V2é‡æ„ç‰ˆæœ¬ï¼Œé‡‡ç”¨äº†å…¨æ–°çš„æŠ€æœ¯æ ˆå’Œæ¶æ„ã€‚å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨V1ç‰ˆæœ¬ï¼Œè¯·åˆ‡æ¢åˆ°ç›¸åº”çš„åˆ†æ”¯ã€‚
